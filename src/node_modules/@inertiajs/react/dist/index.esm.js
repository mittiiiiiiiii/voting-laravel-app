import{router as St}from"@inertiajs/core";import{router as Ke,setupProgress as Be}from"@inertiajs/core";import{createElement as Ve}from"react";import{createHeadManager as Oe,router as fe}from"@inertiajs/core";import{createElement as O,useEffect as Me,useMemo as Le,useState as He}from"react";import{createContext as ke}from"react";var le=ke(void 0);le.displayName="InertiaHeadContext";var B=le;import{createContext as we}from"react";var de=we(void 0);de.displayName="InertiaPageContext";var V=de;var ne=!0,me=!1,ge=async()=>{ne=!1};function q({children:o,initialPage:t,initialComponent:a,resolveComponent:i,titleCallback:s,onHeadUpdate:f}){let[l,m]=He({component:a||null,page:t,key:null}),u=Le(()=>Oe(typeof window>"u",s||(c=>c),f||(()=>{})),[]);if(me||(fe.init({initialPage:t,resolveComponent:i,swapComponent:async c=>ge(c)}),me=!0),Me(()=>{ge=async({component:c,page:e,preserveState:d})=>{if(ne){ne=!1;return}m(r=>({component:c,page:e,key:d?r.key:Date.now()}))},fe.on("navigate",()=>u.forceUpdate())},[]),!l.component)return O(B.Provider,{value:u},O(V.Provider,{value:l.page},null));let g=o||(({Component:c,props:e,key:d})=>{let r=O(c,{key:d,...e});return typeof c.layout=="function"?c.layout(r):Array.isArray(c.layout)?c.layout.concat(r).reverse().reduce((h,F)=>O(F,{children:h,...e})):r});return O(B.Provider,{value:u},O(V.Provider,{value:l.page},g({Component:l.component,key:l.key,props:l.page.props})))}q.displayName="Inertia";async function Pe({id:o="app",resolve:t,setup:a,title:i,progress:s={},page:f,render:l}){let m=typeof window>"u",u=m?null:document.getElementById(o),g=f||JSON.parse(u.dataset.page),c=r=>Promise.resolve(t(r)).then(h=>h.default||h),e=[],d=await Promise.all([c(g.component),Ke.decryptHistory().catch(()=>{})]).then(([r])=>a({el:u,App:q,props:{initialPage:g,initialComponent:r,resolveComponent:c,titleCallback:i,onHeadUpdate:m?h=>e=h:null}}));if(!m&&s&&Be(s),m){let r=await l(Ve("div",{id:o,"data-page":JSON.stringify(g)},d));return{head:e,body:r}}}import{useEffect as ye,useMemo as Ne,useState as je}from"react";import{useContext as Ue}from"react";function J(){let o=Ue(V);if(!o)throw new Error("usePage must be used within the Inertia component");return o}var he=o=>(o=new URL(o.href),o.hash="",o),$e=(o,t)=>he(o).href===he(t).href,Fe=({children:o,data:t,fallback:a})=>{if(!t)throw new Error("`<Deferred>` requires a `data` prop to be a string or array of strings");let[i,s]=je(!1),f=J().props,l=Ne(()=>Array.isArray(t)?t:[t],[t]);return ye(()=>{let m=Se.on("start",u=>{let g=u.detail.visit.only.length>0||u.detail.visit.except.length>0,c=u.detail.visit.only.find(e=>l.includes(e));$e(u.detail.visit.url,window.location)&&(!g||c)&&s(!1)});return()=>{m()}},[]),ye(()=>{s(l.every(m=>f[m]!==void 0))},[f,l]),i?o:a};Fe.displayName="InertiaDeferred";var We=Fe;import Te,{useContext as _e,useEffect as qe,useMemo as Je}from"react";var ze=function({children:o,title:t}){let a=_e(B),i=Je(()=>a.createProvider(),[a]);qe(()=>(i.reconnect(),i.update(c(o)),()=>{i.disconnect()}),[i,o,t]);function s(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1}function f(e){let d=Object.keys(e.props).reduce((r,h)=>{if(["head-key","children","dangerouslySetInnerHTML"].includes(h))return r;let F=e.props[h];return F===""?r+` ${h}`:r+` ${h}="${F}"`},"");return`<${e.type}${d}>`}function l(e){return typeof e.props.children=="string"?e.props.children:e.props.children.reduce((d,r)=>d+m(r),"")}function m(e){let d=f(e);return e.props.children&&(d+=l(e)),e.props.dangerouslySetInnerHTML&&(d+=e.props.dangerouslySetInnerHTML.__html),s(e)||(d+=`</${e.type}>`),d}function u(e){return Te.cloneElement(e,{inertia:e.props["head-key"]!==void 0?e.props["head-key"]:""})}function g(e){return m(u(e))}function c(e){let d=Te.Children.toArray(e).filter(r=>r).map(r=>g(r));return t&&!d.find(r=>r.startsWith("<title"))&&d.push(`<title inertia>${t}</title>`),d}return null},Qe=ze;import{mergeDataIntoQueryString as Ye,router as se,shouldIntercept as ae}from"@inertiajs/core";import{createElement as Ge,forwardRef as Xe,useEffect as ve,useMemo as be,useRef as Ze,useState as et}from"react";var R=()=>{},Ce=Xe(({children:o,as:t="a",data:a={},href:i,method:s="get",preserveScroll:f=!1,preserveState:l=null,replace:m=!1,only:u=[],except:g=[],headers:c={},queryStringArrayFormat:e="brackets",async:d=!1,onClick:r=R,onCancelToken:h=R,onBefore:F=R,onStart:A=R,onProgress:E=R,onFinish:Y=R,onCancel:j=R,onSuccess:G=R,onError:M=R,prefetch:T=!1,cacheFor:k=0,...C},X)=>{let[$,L]=et(0),H=Ze(null);t=t.toLowerCase(),s=typeof i=="object"?i.method:s.toLowerCase();let[Z,ee]=Ye(s,typeof i=="object"?i.url:i||"",a,e),w=Z;a=ee;let I={data:a,method:s,preserveScroll:f,preserveState:l??s!=="get",replace:m,only:u,except:g,headers:c,async:d},W={...I,onCancelToken:h,onBefore:F,onStart(p){L(P=>P+1),A(p)},onProgress:E,onFinish(p){L(P=>P-1),Y(p)},onCancel:j,onSuccess:G,onError:M},K=()=>{se.prefetch(w,I,{cacheFor:te})},D=be(()=>T===!0?["hover"]:T===!1?[]:Array.isArray(T)?T:[T],Array.isArray(T)?T:[T]),te=be(()=>k!==0?k:D.length===1&&D[0]==="click"?0:3e4,[k,D]);ve(()=>()=>{clearTimeout(H.current)},[]),ve(()=>{D.includes("mount")&&setTimeout(()=>K())},D);let _={onClick:p=>{r(p),ae(p)&&(p.preventDefault(),se.visit(w,W))}},re={onMouseEnter:()=>{H.current=window.setTimeout(()=>{K()},75)},onMouseLeave:()=>{clearTimeout(H.current)},onClick:_.onClick},oe={onMouseDown:p=>{ae(p)&&(p.preventDefault(),K())},onMouseUp:p=>{p.preventDefault(),se.visit(w,W)},onClick:p=>{r(p),ae(p)&&p.preventDefault()}};return s!=="get"&&(t="button"),Ge(t,{...C,...{a:{href:w},button:{type:"button"}}[t]||{},ref:X,...D.includes("hover")?re:D.includes("click")?oe:_,"data-loading":$>0?"":void 0},o)});Ce.displayName="InertiaLink";var tt=Ce;import{router as Re}from"@inertiajs/core";import{cloneDeep as z,isEqual as nt}from"es-toolkit";import{get as st,has as at,set as ie}from"es-toolkit/compat";import{useCallback as v,useEffect as it,useLayoutEffect as pt,useMemo as ut,useRef as Q,useState as x}from"react";import{router as De}from"@inertiajs/core";import{useEffect as rt,useState as ot}from"react";function U(o,t){let[a,i]=ot(()=>{let s=De.restore(t);return s!==void 0?s:o});return rt(()=>{De.remember(a,t)},[a,t]),[a,i]}function xe(o,t){let a=Q(null),i=typeof o=="string"?o:null,[s,f]=x((typeof o=="string"?t:o)||{}),l=Q(null),m=Q(null),[u,g]=i?U(s,`${i}:data`):x(s),[c,e]=i?U({},`${i}:errors`):x({}),[d,r]=x(!1),[h,F]=x(!1),[A,E]=x(null),[Y,j]=x(!1),[G,M]=x(!1),T=Q(n=>n),k=ut(()=>!nt(u,s),[u,s]);it(()=>(a.current=!0,()=>{a.current=!1}),[]);let C=v((...n)=>{let p=typeof n[0]=="object",P=p?n[0].method:n[0],b=p?n[0].url:n[1],y=(p?n[1]:n[2])??{},ce={...y,onCancelToken:S=>{if(l.current=S,y.onCancelToken)return y.onCancelToken(S)},onBefore:S=>{if(j(!1),M(!1),clearTimeout(m.current),y.onBefore)return y.onBefore(S)},onStart:S=>{if(F(!0),y.onStart)return y.onStart(S)},onProgress:S=>{if(E(S),y.onProgress)return y.onProgress(S)},onSuccess:S=>{if(a.current&&(F(!1),E(null),e({}),r(!1),j(!0),M(!0),f(z(u)),m.current=setTimeout(()=>{a.current&&M(!1)},2e3)),y.onSuccess)return y.onSuccess(S)},onError:S=>{if(a.current&&(F(!1),E(null),e(S),r(!0)),y.onError)return y.onError(S)},onCancel:()=>{if(a.current&&(F(!1),E(null)),y.onCancel)return y.onCancel()},onFinish:S=>{if(a.current&&(F(!1),E(null)),l.current=null,y.onFinish)return y.onFinish(S)}};P==="delete"?Re.delete(b,{...ce,data:T.current(u)}):Re[P](b,T.current(u),ce)},[u,e,T]),X=v((n,p)=>{g(typeof n=="string"?P=>ie(z(P),n,p):typeof n=="function"?P=>n(P):n)},[g]),[$,L]=x(!1),H=v((n,p)=>{typeof n>"u"?(f(u),L(!0)):f(P=>typeof n=="string"?ie(z(P),n,p):Object.assign(z(P),n))},[u,f]);pt(()=>{$&&(k&&f(u),L(!1))},[$]);let Z=v((...n)=>{n.length===0?g(s):g(p=>n.filter(P=>at(s,P)).reduce((P,b)=>ie(P,b,st(s,b)),{...p}))},[g,s]),ee=v((n,p)=>{e(P=>{let b={...P,...typeof n=="string"?{[n]:p}:n};return r(Object.keys(b).length>0),b})},[e,r]),w=v((...n)=>{e(p=>{let P=Object.keys(p).reduce((b,y)=>({...b,...n.length>0&&!n.includes(y)?{[y]:p[y]}:{}}),{});return r(Object.keys(P).length>0),P})},[e,r]),I=n=>(p,P)=>{C(n,p,P)},W=v(I("get"),[C]),K=v(I("post"),[C]),D=v(I("put"),[C]),te=v(I("patch"),[C]),_=v(I("delete"),[C]),re=v(()=>{l.current&&l.current.cancel()},[]),oe=v(n=>{T.current=n},[]);return{data:u,setData:X,isDirty:k,errors:c,hasErrors:d,processing:h,progress:A,wasSuccessful:Y,recentlySuccessful:G,transform:oe,setDefaults:H,reset:Z,setError:ee,clearErrors:w,submit:C,get:W,post:K,put:D,patch:te,delete:_,cancel:re}}import{router as ct}from"@inertiajs/core";import{useEffect as lt,useRef as dt}from"react";function Ie(o,t={},a={keepAlive:!1,autoStart:!0}){let i=dt(ct.poll(o,t,{...a,autoStart:!1}));return lt(()=>((a.autoStart??!0)&&i.current.start(),()=>i.current.stop()),[]),{stop:i.current.stop,start:i.current.start}}import{router as N}from"@inertiajs/core";import{useEffect as ft,useState as pe}from"react";function Ae(o={}){let t=typeof window>"u"?null:N.getCached(window.location.pathname,o),a=typeof window>"u"?null:N.getPrefetching(window.location.pathname,o),[i,s]=pe(t?.staleTimestamp||null),[f,l]=pe(a!==null),[m,u]=pe(t!==null);return ft(()=>{let g=N.on("prefetching",e=>{e.detail.visit.url.pathname===window.location.pathname&&l(!0)}),c=N.on("prefetched",e=>{e.detail.visit.url.pathname===window.location.pathname&&(l(!1),u(!0),s(e.detail.fetchedAt))});return()=>{c(),g()}},[]),{lastUpdatedAt:i,isPrefetching:f,isPrefetched:m,flush:()=>N.flush(window.location.pathname,o)}}import{router as mt}from"@inertiajs/core";import{createElement as gt,useCallback as Pt,useEffect as yt,useRef as ue,useState as ht}from"react";var Ee=({children:o,data:t,params:a,buffer:i,as:s,always:f,fallback:l})=>{f=f??!1,s=s??"div",l=l??null;let[m,u]=ht(!1),g=ue(!1),c=ue(!1),e=ue(null),d=Pt(()=>{if(t)return{only:Array.isArray(t)?t:[t]};if(!a)throw new Error("You must provide either a `data` or `params` prop.");return a},[a,t]);return yt(()=>{if(!e.current)return;let r=new IntersectionObserver(h=>{if(!h[0].isIntersecting||(!f&&g.current&&r.disconnect(),c.current))return;g.current=!0,c.current=!0;let F=d();mt.reload({...F,onStart:A=>{c.current=!0,F.onStart?.(A)},onFinish:A=>{u(!0),c.current=!1,F.onFinish?.(A),f||r.disconnect()}})},{rootMargin:`${i||0}px`});return r.observe(e.current),()=>{r.disconnect()}},[e,d,i]),f||!m?gt(s,{props:null,ref:e},m?o:l):m?o:null};Ee.displayName="InertiaWhenVisible";var Ft=Ee;var Se=St;export{We as Deferred,Qe as Head,tt as Link,Ft as WhenVisible,Pe as createInertiaApp,Se as router,xe as useForm,J as usePage,Ie as usePoll,Ae as usePrefetch,U as useRemember};
//# sourceMappingURL=index.esm.js.map
