import{q as N,r as f,j as e,m as c}from"./app-Dh8HodcE.js";import{u as v}from"./index.esm-wFQS3uqx.js";/* empty css              */function F(){const{theme:i,choices:r}=N().props,[s,l]=f.useState(r),{register:n,handleSubmit:m,formState:{errors:o}}=v({defaultValues:{title:i.title,description:i.description,deadline:i.deadline}}),h=()=>{l([...s,{id:crypto.randomUUID(),text:""}])},p=t=>{l(s.filter(a=>a.id!==t))},x=t=>{t.choices=s,c.post(`/vote/${i.id}/edit`,t)},u=()=>{c.get("/vote/top")},j=t=>{confirm("本当に削除しますか？")&&c.post(`/vote/${t}/delete`)};return e.jsx("div",{className:"theme-container",children:e.jsxs("div",{className:"theme-box",children:[e.jsx("h1",{className:"page-title",children:"投票テーマ編集"}),e.jsxs("form",{onSubmit:m(x),className:"theme-form",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"theme-label",children:"タイトル（必須）"}),e.jsx("input",{id:"title",type:"text",...n("title",{required:"タイトルは必須です"}),className:"theme-input",placeholder:"例: 好きな色は？"}),o.title&&e.jsx("span",{className:"form-error",children:o.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"theme-label",children:"説明"}),e.jsx("input",{id:"description",type:"text",...n("description"),className:"theme-input"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"deadline",className:"theme-label",children:"締切日時"}),e.jsx("input",{id:"deadline",type:"datetime-local",...n("deadline"),className:"theme-input"})]}),e.jsxs("div",{children:[e.jsx("h2",{children:"選択肢"}),s.map(t=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("label",{htmlFor:`choice-${t.id}`,className:"sr-only",children:"選択肢"}),e.jsx("input",{id:`choice-${t.id}`,type:"text",value:t.text,onChange:a=>{const b=s.map(d=>d.id===t.id?{...d,text:a.target.value}:d);l(b)},className:"theme-input",placeholder:`選択肢 ${s.indexOf(t)+1}`}),e.jsx("button",{type:"button",onClick:()=>p(t.id),className:"choice-remove-btn",children:"✕"})]},t.id)),e.jsx("button",{type:"button",onClick:h,className:"choice-add-btn",children:"＋ 選択肢を追加"})]}),e.jsxs("div",{className:"flex gap-2 mt-4 justify-center",children:[e.jsx("button",{type:"submit",className:"theme-add-btn",children:"保存"}),e.jsx("button",{type:"button",onClick:()=>j(i.id),className:"theme-delete-btn",children:"削除"}),e.jsx("button",{type:"button",onClick:u,className:"theme-cancel-btn",children:"キャンセル"})]})]})]})})}export{F as default};
