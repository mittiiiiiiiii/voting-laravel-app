import{q as b,r as l,j as e,m as c}from"./app-gKVprWtW.js";/* empty css              */function f(){const{themes:o,authUserId:d}=b().props,[s,i]=l.useState("all"),[a,u]=l.useState(!1),[r,h]=l.useState("deadline_asc"),m=[...o.filter(t=>a&&t.user_id!==d?!1:s==="in_progress"?!t.is_closed:s==="closed"?t.is_closed:!0)].sort((t,n)=>{switch(r){case"created_asc":return new Date(t.created_at).getTime()-new Date(n.created_at).getTime();case"created_desc":return new Date(n.created_at).getTime()-new Date(t.created_at).getTime();case"deadline_asc":return new Date(t.deadline||0).getTime()-new Date(n.deadline||0).getTime();case"deadline_desc":return new Date(n.deadline||0).getTime()-new Date(t.deadline||0).getTime();default:return 0}}),p=()=>{c.get("/vote/new")},x=t=>{c.get(`/vote/${t}/choice`)},j=t=>{c.get(`/vote/${t}/edit`)};return e.jsx("div",{className:"theme-container",children:e.jsxs("div",{className:"theme-box",children:[e.jsx("h1",{className:"page-title",children:"投票一覧"}),e.jsxs("div",{className:"filter-buttons",children:[e.jsx("button",{type:"button",onClick:()=>i("all"),className:`filter-btn ${s==="all"?"active":""}`,children:"すべて"}),e.jsx("button",{type:"button",onClick:()=>i("in_progress"),className:`filter-btn ${s==="in_progress"?"active":""}`,children:"進行中のみ"}),e.jsx("button",{type:"button",onClick:()=>i("closed"),className:`filter-btn ${s==="closed"?"active":""}`,children:"締め切りのみ"}),e.jsx("button",{type:"button",onClick:()=>u(!a),className:`filter-btn ${a?"active":""}`,children:"自分が作成したテーマ"})]}),e.jsxs("div",{className:"sort-dropdown",children:[e.jsx("label",{htmlFor:"sort",children:"並べ替え:"}),e.jsxs("select",{id:"sort",value:r,onChange:t=>h(t.target.value),children:[e.jsx("option",{value:"created_asc",children:"作成日: 昇順"}),e.jsx("option",{value:"created_desc",children:"作成日: 降順"}),e.jsx("option",{value:"deadline_asc",children:"締め切り: 昇順"}),e.jsx("option",{value:"deadline_desc",children:"締め切り: 降順"})]})]}),e.jsx("ul",{className:"theme-list",children:m.map(t=>e.jsxs("li",{className:"theme-item",children:[e.jsxs("div",{children:[e.jsx("h2",{children:t.title}),e.jsx("p",{children:t.description}),e.jsxs("p",{children:["締切:"," ",t.deadline?new Date(t.deadline).toLocaleString():"なし"]}),e.jsx("p",{children:t.is_closed?"終了済み":"進行中"})]}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{type:"button",onClick:()=>x(t.id),className:"theme-vote-btn",children:"投票"}),t.user_id===d&&e.jsx("button",{type:"button",onClick:()=>j(t.id),className:"theme-edit-btn theme-vote-btn",children:"編集"})]})]},t.id))}),e.jsx("button",{type:"button",onClick:p,className:"theme-add-btn",children:"投票フォームを追加"})]})})}export{f as default};
